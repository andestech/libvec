<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Andes Vector Library: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="andes_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Andes Vector Library
   &#160;<span id="projectnumber">V2.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ov_sec.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Andes Vector Library (libvec) User Manual contains information about vector function specifications in Andes vector library for ISA V5 toolchains and describes how to use these functions.</p>
<p>Andes vector library provides comprehensive functions that have been heavily optimized for RISC-V "V" Extension. These functions include basic operations for vectors or matrices, functions which compute more complicated algorithms such as filtering or image resizing, and transform functions. Designed and developed with toolchains from AndeSight v5.0.0 and later versions, Andes vector library provides easy-to-use APIs to encapsulate the complexity of calculations when processing signals. It benefits you to save development resources, focus on your system and reduce development time.</p>
<p>To call the library functions, just include header files provided by Andes vector library. These header files define prototypes and instance structures of functions. They are named according to function categories as listed below:</p><ul>
<li>riscv_vec_basic.h</li>
<li>riscv_vec_filtering.h</li>
<li>riscv_vec_image.h</li>
<li>riscv_vec_matrix.h</li>
<li>riscv_vec_transform.h</li>
<li>riscv_vec_complex.h</li>
<li>riscv_vec_utils.h</li>
<li>riscv_vec_statistics.h</li>
<li>riscv_vec_svm.h</li>
<li>riscv_vec_distance.h</li>
<li>riscv_vec_sort.h</li>
<li>riscv_vec_window.h</li>
</ul>
<p>For example, if you would like to use basic functions for some operations with vectors, you can include riscv_vec_basic.h in your C files.</p>
<p>Andes vector library defines several data types, structure and macros to properly store signal data for later processing. These data types, structure and macros are defined in riscv_vec_types.h and riscv_dsp_math_types.h.They are as follows:</p><ul>
<li>typedef int8_t q7_t; // Q7 type</li>
<li>typedef uint8_t u8_t; // U8 type</li>
<li>typedef int16_t q15_t; // Q15 type</li>
<li>typedef uint16_t u16_t; // U16 type</li>
<li>typedef int32_t q31_t; // Q31 type</li>
<li>typedef uint32_t u32_t; // U32 type</li>
<li>typedef int64_t q63_t; // Q63 type</li>
<li>typedef uint64_t u64_t; // U64 type</li>
<li>typedef float float32_t; // single-precision floating-point (F32) type</li>
<li>typedef double float64_t; // double-precision floating-point (F64) type</li>
<li>typedef _Float16 float16_t; // half-precision floating-point (F16) type</li>
<li>typedef struct { float32_t x; float32_t y; } <a class="el" href="structriscv__vec__f32x2__t.html" title="A structure of two float32_t values.">riscv_vec_f32x2_t</a>; // for the structure of two floating point numbers</li>
<li>typedef struct { float32_t x; float32_t y; float32_t z; } <a class="el" href="structriscv__vec__f32x3__t.html" title="A structure of three float32_t values.">riscv_vec_f32x3_t</a>; // for the structure of three floating point numbers,</li>
<li>typedef struct { float32_t x; float32_t y; float32_t z; float32_t w; } <a class="el" href="structriscv__vec__f32x4__t.html" title="A structure of four float32_t values.">riscv_vec_f32x4_t</a>; //for the structure of four floating point numbers</li>
<li>#define RISCV_VEC_OK ((int)0) //for the return value 0</li>
<li>#define RISCV_VEC_FAIL ((int)-1) //for the return value 1</li>
<li>typedef enum { RISCV_VEC_SUCCESS = 0, RISCV_VEC_MALLOC_FAIL = -1, RISCV_VEC_INPUT_PARAM_ERROR = -2, } riscv_vec_status;</li>
</ul>
<p><b>Note:</b> </p>
<p>If your application will use functions involving the half-precision type, make sure to compile it with the option "-mzfh" using a toolchain with the HW FPU support (i.e., v5f or v5d toolchain). Please also be aware that this application can only be executed on a target with the HW FPU support; otherwise, problems will occur when the program is loaded.</p>
<h1><a class="anchor" id="ov_sec1"></a>
Linking Options for Newlib and MCUlib Toolchains</h1>
<p>In addition to the above header files, different linking options are required depending on the toolchain in use. This section introduces the options for Newlib and MCUlib toolchains, which include:</p><ul>
<li>-lvec Links Andes vector library without RISC-V "V" Extension (libvec.a)</li>
<li>-lvec_v Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=32 support (libvec_v.a)</li>
<li>-lvec_v_seg Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=32 support, and RISC-V Vector segment load/store instruction (libvec_v_seg.a)</li>
<li>-lvec_v_elen64 Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=64 support (libvec_v_elen64.a)</li>
<li>-lvec_v_elen64_seg Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=64 support, and RISC-V Vector segment load/store instruction (libvec_v_elen64_seg.a)</li>
<li>-mext-vecor Enables the RISC-V "V" Extension</li>
<li>-mext-dsp Enables the DSP ISA Extension</li>
<li>-mext-zc Enables the Code Size Reduction Extension</li>
<li>-mzfh Enables the half-precision floating-point type</li>
<li>-mtune=andes-45-series Enables a more efficient library on Andes 45-series cores</li>
<li>-lm Links the libm math library</li>
</ul>
<p>Apply the -lm option directly to ensure the functionality of Andes vector library functions that involve math functions from the libm library.</p>
<p>Note that when targeting AndesCore 45-series processors, you can use the -mtune=andes-45- series option to enable optimizations specialized for these processors. In addition, if your application uses functions involving half-precision floating-point data type (i.e., functions named with f16), ensure that your toolchain (e.g., v5f or v5d toolchain) supports HW FPU. Compile with the -mzfh option to enable both the half-precision floating-point data type and Zfh extension.</p>
<p>Also, to prevent potential issues when loading the program, be aware of the following:</p><ul>
<li>An application built with -mext-dsp cannot be executed on a target that lacks support for the DSP ISA Extension.</li>
<li>An application built with -mext-vector cannot be executed on a target that lacks support for the RISC-V Vector Extension.</li>
<li>An application built with -lvec_v_seg -mext-vector or -lvec_v_elen64_seg -mext-vector cannot be executed on a target that lacks support for RISC-V Vector segment load/store instructions.</li>
<li>An application built with -lvec_v_elen64 -mext-vector or -lvec_v_elen64_seg -mext-vector cannot be executed on a target that lacks support for ELEN=64.</li>
<li>An application built with -mzfh cannot be executed on a target that lacks support for the half-precision floating-point extension.</li>
<li>An application built with -mext-zc cannot be executed on a target that lacks support for the Code Size Reduction Extension.</li>
</ul>
<h1><a class="anchor" id="ov_sec2"></a>
Linking Options for Glibc Toolchains</h1>
<p>For Glibc toolchains, the available linking options include</p><ul>
<li>-static Applies static linking</li>
<li>-lvec Links Andes vector library without RISC-V "V" Extension (libvec.a)</li>
<li>-lvec_v Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=32 support (libvec_v.a)</li>
<li>-lvec_v_seg Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=32 support, and RISC-V Vector segment load/store instruction (libvec_v_seg.a)</li>
<li>-lvec_v_elen64 Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=64 support (libvec_v_elen64.a)</li>
<li>-lvec_v_elen64_seg Links Andes vector library with RISC-V "V" Extension and AndeStar V5 Vector Dot Product Extension and ELEN=64 support, and RISC-V Vector segment load/store instruction (libvec_v_elen64_seg.a)</li>
<li>-mext-vecor Enables the RISC-V "V" Extension</li>
<li>-mzfh Enables the half-precision floating-point type</li>
<li>-lm Links the libm math library</li>
</ul>
<p>Apply the -lm option directly to ensure the functionality of Andes vector library functions that involve math functions from the libm library.</p>
<p>Static linking and dynamic linking require different options. The following table summarizes the required linking options according to the linking type and extension support.</p>
<p>Note that if your application uses functions involving half-precision floating-point data type (i.e., functions named with F16), ensure your toolchain (e.g., v5f or v5d toolchain) supports HW FPU. Compile with the -mzfh option to enable both the half-precision floating-point data type and Zfh extension.</p>
<p>Also, to prevent potential issues when loading the program, be aware of the following:</p><ul>
<li>An application built with -mext-vector cannot be executed on a target that lacks support for the RISC-V Vector Extension.</li>
<li>An application built with -lvec_v_seg -mext-vector or -lvec_v_elen64_seg -mext-vector cannot be executed on a target that lacks support for RISC-V Vector segment load/store instructions.</li>
<li>An application built with -lvec_v_elen64 -mext-vector or -lvec_v_elen64_seg -mext-vector cannot be executed on a target that lacks support for ELEN=64.</li>
<li>An application built with -mzfh cannot be executed on a target that lacks support for the half-precision floating-point extension. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
